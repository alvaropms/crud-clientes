(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[229],{7183:function(n,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/home",function(){return e(1423)}])},3971:function(n,t,e){"use strict";e.d(t,{Z:function(){return d}});var r=e(5893),a=e(1664),i=e.n(a),c=e(7294),s=e(1163),o=e.n(s),u=e(3726),l=e(5615);var d=function(n){var t=n.page,e=n.cliente,a=n.atualizar,s=(0,c.useState)(""),d=s[0],f=s[1],h=(0,c.useState)(""),p=h[0],m=h[1],x=(0,c.useState)(""),v=x[0],b=x[1],j=!1,w=!1;switch(t.toLowerCase()){case"login":j=!0;break;case"edit":w=!0}return(0,c.useEffect)((function(){w&&(b(null===e||void 0===e?void 0:e.nome),m(null===e||void 0===e?void 0:e.email))}),[w,null===e||void 0===e?void 0:e.nome,null===e||void 0===e?void 0:e.email]),(0,r.jsx)("div",{className:"d-flex flex-column align-items-center justify-content-center ".concat(w?"mb-3":"fullScreenHeight"),children:(0,r.jsx)("div",{className:"card text-center text-white bg-dark p-4",children:(0,r.jsxs)("div",{className:"card-body",children:[w?(0,r.jsx)("h5",{children:"Editar cliente"}):(0,r.jsxs)("h5",{children:["Fa\xe7a seu ",j?"Login":"Cadastro"]}),(0,r.jsxs)("form",{className:"pt-3",children:[j?null:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("label",{htmlFor:"nome",children:"Nome"}),(0,r.jsx)("input",{type:"text",className:"form-control",value:v,onChange:function(n){return b(n.target.value)},placeholder:"Jo\xe3o da Silva"})," "]}),(0,r.jsx)("label",{htmlFor:"email",children:"Email"}),(0,r.jsx)("input",{type:"email",className:"form-control",value:p,onChange:function(n){return m(n.target.value)},placeholder:"exemplo@exemplo.com"}),w?null:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("label",{htmlFor:"senha",children:"Senha"}),(0,r.jsx)("input",{type:"password",value:d,onChange:function(n){return f(n.target.value)},className:"form-control"})]}),(0,r.jsx)("button",{type:"button",onClick:function(){return w?a(v,p,null===e||void 0===e?void 0:e.id):j?function(n,t){l.Z.logar(n,t).then((function(n){alert(n.data),o().push("/home")})).catch((function(n){alert("Erro ao logar"),alert(n.response.data)}))}(p,d):function(n,t,e){var r=new u.c(n,t,void 0,e);l.Z.cadastrar(r).then((function(){alert("Cadastrado com sucesso!"),o().push("/")})).catch((function(n){alert("Erro ao cadastrar"),alert(n.response.data)}))}(v,p,d)},className:"fullWidth mt-2 btn btn-primary",children:j?"Logar":w?"Salvar":"Cadastrar"}),w?null:j?(0,r.jsx)(i(),{href:"/cadastro",children:"Cadastrar-se"}):(0,r.jsx)(i(),{href:"/",children:"Logar"})]})]})})})}},3726:function(n,t,e){"use strict";e.d(t,{c:function(){return r}});var r=function n(t,e,r,a){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.nome=t,this.email=e,this.id=r,this.senha=a}},1423:function(n,t,e){"use strict";e.r(t),e.d(t,{default:function(){return f}});var r=e(5893),a=e(7294),i=function(n){var t=n.cliente,e=n.setEdit,a=n.excluir;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:t.nome}),(0,r.jsx)("td",{children:t.email}),(0,r.jsxs)("td",{className:"d-flex justify-content-evenly flex-wrap",children:[(0,r.jsx)("button",{onClick:function(){return e(t.id)},type:"button",className:"btn btn-primary my-1",children:"Editar"}),(0,r.jsx)("button",{onClick:function(){return a(t.id)},type:"button",className:"btn btn-danger my-1",children:"Excluir"})]})]})})},c=e(3971),s=e(1664),o=e.n(s),u=function(){return(0,r.jsxs)("nav",{className:"navbar navbar-dark bg-dark navbar-expand-lg px-2",children:[(0,r.jsx)("span",{className:"navbar-brand",children:"Clientes"}),(0,r.jsx)("div",{className:"collapse navbar-collapse"}),(0,r.jsx)(o(),{href:"/",children:(0,r.jsx)("button",{className:"btn btn-sm btn-outline-danger",type:"button",children:"Deslogar"})})]})},l=e(3726),d=e(5615);var f=function(){var n=function(n){!function(n,t,e){d.Z.deletar(n).then((function(){t(e.filter((function(t){return t.id!==n})))})).catch((function(){alert("Erro ao excluir")}))}(n,s,e)},t=(0,a.useState)([]),e=t[0],s=t[1],o=(0,a.useState)(-1),f=o[0],h=o[1];return function(n){(0,a.useEffect)((function(){d.Z.listar().then((function(t){n(t)})).catch((function(n){alert("Erro ao buscar clientes"),alert(n.response.data)}))}),[n])}(s),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u,{}),(0,r.jsx)("h1",{className:"my-5 text-center",children:"Listagem de clientes"}),(0,r.jsxs)("div",{className:"container",children:[(0,r.jsxs)("table",{className:"table",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Nome"}),(0,r.jsx)("th",{children:"Email"}),(0,r.jsx)("th",{className:"text-center",children:"A\xe7\xf5es"})]})}),(0,r.jsx)("tbody",{children:e.map((function(t){return(0,r.jsx)(i,{excluir:n,cliente:t,setEdit:h},t.id)}))})]}),f<0?null:(0,r.jsx)(c.Z,{page:"edit",cliente:e.find((function(n){return n.id===f})),atualizar:function(n,t,r){!function(n,t,e,r,a,i){var c=new l.c(n,t,e);d.Z.atualizar(c).then((function(r){alert(r.data),a(i.map((function(r){return r.id===e?(r.id=e,r.email=t,r.nome=n,r):r})))})).catch((function(n){alert("Erro ao atualizar"),alert(n.response.data)})).finally((function(){r(-1)}))}(n,t,r,h,s,e)}})]})]})}},5615:function(n,t,e){"use strict";var r=e(4051),a=e.n(r),i=e(9669),c=e.n(i),s=e(3726);function o(n,t,e,r,a,i,c){try{var s=n[i](c),o=s.value}catch(u){return void e(u)}s.done?t(o):Promise.resolve(o).then(r,a)}function u(n){return function(){var t=this,e=arguments;return new Promise((function(r,a){var i=n.apply(t,e);function c(n){o(i,r,a,c,s,"next",n)}function s(n){o(i,r,a,c,s,"throw",n)}c(void 0)}))}}var l=new(function(){function n(){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.api=c().create({baseURL:"http://localhost:8080"})}var t=n.prototype;return t.toCliente=function(n){var t=n.data;return new s.c(t.nome,t.email,t.id)},t.toClientes=function(n){return n.data.map((function(n){return n}))},t.cadastrar=function(n){var t=this;return u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.api.post("/cadastrar",n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()},t.listar=function(){var n=this;return u(a().mark((function t(){var e;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.api.get("/listar");case 2:return e=t.sent,t.abrupt("return",n.toClientes(e));case 4:case"end":return t.stop()}}),t)})))()},t.deletar=function(n){var t=this;return u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.api.delete("/deletar/"+n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()},t.atualizar=function(n){var t=this;return u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.api.put("/atualizar",n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()},t.pesquisar=function(n){var t=this;return u(a().mark((function e(){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.api.get("/pesquisar",{params:{nome:n}});case 2:return r=e.sent,e.abrupt("return",t.toCliente(r));case 4:case"end":return e.stop()}}),e)})))()},t.logar=function(n,t){var e=this;return u(a().mark((function r(){return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.api.post("/logar",{email:n,senha:t});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))()},n}());t.Z=l}},function(n){n.O(0,[630,774,888,179],(function(){return t=7183,n(n.s=t);var t}));var t=n.O();_N_E=t}]);